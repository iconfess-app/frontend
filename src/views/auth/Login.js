import React, { Component } from 'react';
// import { Link } from 'react-router-dom';
import { withAuth } from '../../Context/AuthContext';
import { withFlash } from '../../Context/NotificationContext';

class Login extends Component {
  constructor(props) {
    super(props);
    this.state = {
      email: '',
      password: '',
      hidden: true,
      emailValid: true,
      passwordValid: true,
      formValid: false,
      errorMessage: {},
    };
  }

  componentDidMount = () => {
    const { isLoggedin, history } = this.props;
    if (isLoggedin) {
      history.push('/edit');
    }
  };

  validateForm = () => {
    const { emailValid, passwordValid } = this.state;
    this.setState({
      formValid: emailValid && passwordValid,
    });
  };

  updateEmail = email => {
    this.setState({ email, passwordValid: false }, this.validateEmail);
  };

  validateEmail = () => {
    const { email } = this.state;
    let emailValid = true;
    const errorMessage = { ...this.state.errorMessage };
    if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
      emailValid = false;
      errorMessage.email = 'This is an invalid email format';
    }
    this.setState({ emailValid, errorMessage }, this.validateForm);
  };

  updatePassword = password => {
    this.setState({ password }, this.validatePassword);
  };

  validatePassword = () => {
    const { password } = this.state;
    let passwordValid = true;
    const errorMessage = { ...this.state.errorMessage };

    if (password.length < 6) {
      passwordValid = false;
      errorMessage.password = 'Password must be at least 6 characters long';
    } else if (!/\d/.test(password)) {
      passwordValid = false;
      errorMessage.password = 'Password must contain a number';
    } else if (!/[!@#$%^&*]/.test(password)) {
      passwordValid = false;
      errorMessage.password = 'Password must contain special character: !@#$%^&*';
    }

    this.setState({ passwordValid, errorMessage }, this.validateForm);
  };

  handlePassword = () => {
    const { hidden } = this.state;
    this.setState({
      hidden: !hidden,
    });
  };

  handleFormSubmit = e => {
    e.preventDefault();
    const { email, password } = this.state;
    try {
      this.props.handleLogin({
        email,
        password,
      });
      this.props.handleFlash('Welcome back dear confessor!', 'success');
      // Flash should go to authcontext
      this.redirect();
    } catch (error) {
      this.props.handleFlash(error, 'error');
    }
  };

  redirect = () => {
    setTimeout(() => {
      this.props.history.push('/');
    }, 2000);
  };

  render() {
    const { email, password, hidden, formValid, emailValid, passwordValid, errorMessage } = this.state;
    return (
      <div className="container">
        <div className="content">
          <div className="login-header">
            <div className="login-header__logo">
              <svg width="164" height="150" viewBox="0 0 164 150" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M0.30675 100.077C0.153376 99.9233 0 99.6933 0 99.3865V96.4724C0 96.1657 0.0766884 95.9356 0.30675 95.7822C0.460124 95.6288 0.690184 95.4755 0.996933 95.4755H4.67792C4.98467 95.4755 5.21473 95.5522 5.3681 95.7822C5.52148 95.9356 5.67485 96.2424 5.67485 96.4724V99.3865C5.67485 99.6933 5.59817 99.8466 5.3681 100.077C5.13804 100.23 4.90798 100.383 4.67792 100.383H0.996933C0.766871 100.383 0.536812 100.307 0.30675 100.077ZM0.536811 124.463C0.383437 124.31 0.230061 124.08 0.230061 123.773V104.755C0.230061 104.448 0.306749 104.218 0.536811 104.064C0.690185 103.911 0.920245 103.834 1.22699 103.834H4.60123C4.90798 103.834 5.06136 103.911 5.29142 104.141C5.44479 104.294 5.59817 104.525 5.59817 104.831V123.85C5.59817 124.156 5.52148 124.31 5.29142 124.54C5.13804 124.693 4.90798 124.847 4.60123 124.847H1.15031C0.920246 124.77 0.690185 124.693 0.536811 124.463Z"
                  fill="white"
                />
                <path
                  d="M13.2669 122.316C11.1963 120.399 10.1227 117.715 10.046 114.264C10.046 113.574 9.96933 112.347 9.96933 110.736C9.96933 109.049 9.96933 107.822 10.046 107.132C10.1994 103.681 11.273 100.997 13.3436 99.0798C15.4141 97.1626 18.2515 96.1656 21.9325 96.1656C24.3098 96.1656 26.3804 96.5491 28.2209 97.3926C29.9847 98.2362 31.365 99.3098 32.362 100.767C33.3589 102.224 33.8957 103.758 33.8957 105.598V105.675C33.8957 105.905 33.819 106.058 33.6657 106.212C33.5123 106.365 33.2822 106.442 33.0522 106.442H29.1411C28.8344 106.442 28.6043 106.365 28.4509 106.212C28.2976 106.058 28.1442 105.828 28.0675 105.445C27.6841 103.758 26.9939 102.607 25.9969 101.917C25 101.227 23.6963 100.92 22.0092 100.92C18.1748 100.92 16.181 103.067 16.0276 107.362C16.0276 108.052 15.9509 109.202 15.9509 110.736C15.9509 112.27 15.9509 113.42 16.0276 114.187C16.181 118.482 18.1748 120.629 22.0092 120.629C23.6196 120.629 24.9233 120.322 25.9203 119.632C26.9172 118.942 27.6074 117.791 28.0675 116.104C28.1442 115.721 28.2976 115.491 28.4509 115.337C28.6043 115.184 28.8344 115.107 29.1411 115.107H33.0522C33.2822 115.107 33.5123 115.184 33.6657 115.337C33.819 115.491 33.8957 115.721 33.8957 115.951C33.819 117.715 33.3589 119.325 32.362 120.782C31.365 122.239 29.9847 123.313 28.2209 124.156C26.4571 125 24.3865 125.383 21.9325 125.383C18.1749 125.153 15.3374 124.233 13.2669 122.316Z"
                  fill="white"
                />
                <path
                  d="M39.7239 122.776C38.0368 121.166 37.0399 118.942 36.9632 116.104L36.8865 114.34L36.9632 112.577C37.1166 109.739 38.0368 107.515 39.8006 105.905C41.5644 104.294 44.0184 103.451 47.0859 103.451C50.1534 103.451 52.6074 104.294 54.3712 105.905C56.135 107.515 57.0552 109.739 57.2086 112.577C57.2086 112.883 57.2853 113.497 57.2853 114.34C57.2853 115.184 57.2853 115.798 57.2086 116.104C57.0552 118.942 56.135 121.166 54.4479 122.776C52.7607 124.387 50.3068 125.23 47.1626 125.23C43.865 125.153 41.4111 124.387 39.7239 122.776ZM50.3834 119.785C51.1503 118.865 51.5338 117.561 51.6104 115.874C51.6104 115.567 51.6871 115.107 51.6871 114.264C51.6871 113.497 51.6871 112.96 51.6104 112.653C51.5338 110.966 51.1503 109.586 50.3834 108.742C49.6166 107.822 48.543 107.362 47.0859 107.362C45.6288 107.362 44.5552 107.822 43.7883 108.742C43.0215 109.663 42.5614 110.966 42.5614 112.653L42.4847 114.264L42.5614 115.874C42.638 117.561 43.0215 118.865 43.7883 119.785C44.5552 120.706 45.7055 121.089 47.0859 121.089C48.4663 121.089 49.6166 120.629 50.3834 119.785Z"
                  fill="white"
                />
                <path
                  d="M61.5798 124.463C61.4264 124.31 61.273 124.08 61.273 123.773V104.755C61.273 104.448 61.3497 104.218 61.5798 104.064C61.7331 103.911 61.9632 103.834 62.27 103.834H65.6442C65.9509 103.834 66.181 103.911 66.3344 104.064C66.4877 104.218 66.5644 104.448 66.5644 104.755V106.442C68.1749 104.448 70.4755 103.451 73.3129 103.451C75.7669 103.451 77.7607 104.294 79.2178 105.905C80.6749 107.515 81.365 109.739 81.365 112.577V123.926C81.365 124.233 81.2884 124.387 81.135 124.617C80.9816 124.77 80.7515 124.923 80.4448 124.923H76.8405C76.5337 124.923 76.3804 124.847 76.1503 124.617C75.9969 124.463 75.8436 124.233 75.8436 123.926V112.807C75.8436 111.273 75.4601 110.046 74.6933 109.126C73.9264 108.282 72.8528 107.822 71.3957 107.822C70.0154 107.822 68.9417 108.282 68.0982 109.126C67.2546 110.046 66.8712 111.196 66.8712 112.73V123.85C66.8712 124.156 66.7945 124.31 66.6411 124.54C66.4877 124.693 66.2577 124.847 65.9509 124.847H62.3466C61.9632 124.77 61.7331 124.693 61.5798 124.463Z"
                  fill="white"
                />
                <path
                  d="M88.3436 124.463C88.1902 124.31 88.0368 124.08 88.0368 123.773V108.052H84.7393C84.4325 108.052 84.2792 107.975 84.0491 107.745C83.8957 107.592 83.7424 107.362 83.7424 107.055V104.678C83.7424 104.371 83.8191 104.218 84.0491 103.988C84.2025 103.834 84.4325 103.681 84.7393 103.681H88.0368V102.071C88.0368 99.6166 88.727 97.7761 90.0307 96.6258C91.3344 95.3988 93.3282 94.862 96.0123 94.862H98.773C99.0798 94.862 99.2331 94.9387 99.4632 95.1687C99.6166 95.3221 99.77 95.5522 99.77 95.8589V98.2362C99.77 98.5429 99.6933 98.6963 99.4632 98.9264C99.3098 99.0798 99.0798 99.2331 98.773 99.2331H96.1657C95.092 99.2331 94.4019 99.4632 93.9417 100C93.4816 100.537 93.3282 101.304 93.3282 102.377V103.758H98.3896C98.6196 103.758 98.8497 103.834 99.0798 104.064C99.2331 104.218 99.3865 104.448 99.3865 104.755V107.132C99.3865 107.439 99.3098 107.592 99.0798 107.822C98.9264 107.975 98.6963 108.129 98.3896 108.129H93.3282V123.85C93.3282 124.156 93.2515 124.31 93.0982 124.54C92.9448 124.693 92.7147 124.847 92.408 124.847H89.0338C88.727 124.77 88.497 124.693 88.3436 124.463Z"
                  fill="white"
                />
                <path
                  d="M103.758 122.623C101.994 120.936 101.074 118.482 100.92 115.261L100.844 114.264C100.844 110.89 101.687 108.282 103.451 106.288C105.215 104.371 107.669 103.374 110.736 103.374C113.957 103.374 116.411 104.371 118.175 106.288C119.939 108.206 120.782 110.813 120.782 114.034V114.877C120.782 115.184 120.706 115.337 120.475 115.567C120.322 115.721 120.015 115.874 119.785 115.874H106.365V116.181C106.442 117.715 106.825 118.942 107.592 119.939C108.359 120.936 109.433 121.396 110.736 121.396C112.27 121.396 113.497 120.782 114.494 119.555C114.724 119.248 114.954 119.095 115.031 119.018C115.184 118.942 115.414 118.942 115.721 118.942H119.248C119.479 118.942 119.709 119.018 119.862 119.172C120.015 119.325 120.092 119.479 120.092 119.709C120.092 120.322 119.709 121.089 118.942 122.009C118.175 122.853 117.101 123.62 115.644 124.31C114.187 124.923 112.577 125.307 110.66 125.307C107.899 125.153 105.521 124.31 103.758 122.623ZM115.337 112.423V112.347C115.337 110.736 114.954 109.509 114.11 108.512C113.344 107.592 112.27 107.055 110.89 107.055C109.509 107.055 108.436 107.515 107.669 108.512C106.902 109.433 106.518 110.736 106.518 112.347V112.423H115.337Z"
                  fill="white"
                />
                <path
                  d="M127.607 124.233C126.227 123.62 125.23 122.929 124.54 122.086C123.85 121.242 123.543 120.552 123.543 119.939C123.543 119.632 123.62 119.479 123.773 119.325C123.926 119.172 124.156 119.095 124.387 119.095H127.684C127.914 119.095 128.067 119.172 128.221 119.402C128.374 119.479 128.681 119.785 129.141 120.169C129.601 120.552 130.138 120.859 130.752 121.089C131.365 121.319 132.055 121.396 132.745 121.396C133.819 121.396 134.663 121.166 135.353 120.782C136.043 120.399 136.35 119.785 136.35 119.018C136.35 118.482 136.196 118.021 135.89 117.715C135.583 117.408 135.046 117.101 134.202 116.794C133.436 116.488 132.209 116.181 130.598 115.874C128.298 115.414 126.61 114.647 125.537 113.65C124.463 112.653 123.926 111.35 123.926 109.663C123.926 108.589 124.233 107.592 124.923 106.595C125.537 105.675 126.534 104.831 127.837 104.218C129.141 103.604 130.675 103.298 132.439 103.298C134.279 103.298 135.813 103.604 137.193 104.141C138.497 104.755 139.494 105.445 140.184 106.212C140.874 106.979 141.181 107.745 141.181 108.359C141.181 108.589 141.104 108.819 140.951 108.972C140.798 109.126 140.567 109.202 140.337 109.202H137.347C137.04 109.202 136.81 109.126 136.656 108.896C136.503 108.742 136.196 108.512 135.736 108.129C135.276 107.745 134.893 107.439 134.356 107.285C133.819 107.055 133.206 106.979 132.515 106.979C131.518 106.979 130.752 107.209 130.215 107.592C129.678 108.052 129.371 108.589 129.371 109.279C129.371 109.739 129.525 110.199 129.755 110.506C129.985 110.813 130.521 111.12 131.288 111.426C132.055 111.733 133.206 111.963 134.816 112.27C139.647 113.19 142.101 115.337 142.101 118.635C142.101 120.552 141.258 122.086 139.647 123.313C137.96 124.463 135.66 125.077 132.745 125.077C130.675 125.153 128.988 124.847 127.607 124.233Z"
                  fill="white"
                />
                <path
                  d="M148.696 124.233C147.316 123.62 146.319 122.929 145.629 122.086C144.939 121.242 144.632 120.552 144.632 119.939C144.632 119.632 144.709 119.479 144.862 119.325C145.015 119.172 145.245 119.095 145.475 119.095H148.773C149.003 119.095 149.156 119.172 149.31 119.402C149.463 119.479 149.77 119.785 150.23 120.169C150.69 120.552 151.227 120.859 151.841 121.089C152.454 121.319 153.144 121.396 153.834 121.396C154.908 121.396 155.752 121.166 156.442 120.782C157.132 120.399 157.439 119.785 157.439 119.018C157.439 118.482 157.285 118.021 156.979 117.715C156.672 117.408 156.135 117.101 155.291 116.794C154.525 116.488 153.298 116.181 151.687 115.874C149.387 115.414 147.699 114.647 146.626 113.65C145.552 112.653 145.015 111.35 145.015 109.663C145.015 108.589 145.322 107.592 146.012 106.595C146.626 105.675 147.623 104.831 148.926 104.218C150.23 103.604 151.764 103.298 153.528 103.298C155.368 103.298 156.902 103.604 158.282 104.141C159.586 104.755 160.583 105.445 161.273 106.212C161.963 106.979 162.27 107.745 162.27 108.359C162.27 108.589 162.193 108.819 162.04 108.972C161.887 109.126 161.656 109.202 161.426 109.202H158.436C158.129 109.202 157.899 109.126 157.745 108.896C157.592 108.742 157.285 108.512 156.825 108.129C156.365 107.745 155.982 107.439 155.445 107.285C154.908 107.055 154.294 106.979 153.604 106.979C152.607 106.979 151.841 107.209 151.304 107.592C150.767 108.052 150.46 108.589 150.46 109.279C150.46 109.739 150.614 110.199 150.844 110.506C151.074 110.813 151.61 111.12 152.377 111.426C153.144 111.733 154.294 111.963 155.905 112.27C160.736 113.19 163.19 115.337 163.19 118.635C163.19 120.552 162.347 122.086 160.736 123.313C159.049 124.463 156.748 125.077 153.834 125.077C151.764 125.153 150.077 124.847 148.696 124.233Z"
                  fill="white"
                />
                <path
                  d="M8.81903 149.617C8.74234 149.54 8.74234 149.463 8.74234 149.387V142.638C8.74234 142.561 8.74234 142.485 8.81903 142.408C8.89572 142.331 8.97241 142.331 9.04909 142.331H9.27915C9.35584 142.331 9.43253 142.331 9.50922 142.408C9.5859 142.485 9.5859 142.561 9.5859 142.638V143.328C9.89265 142.945 10.1994 142.715 10.5828 142.485C10.9663 142.331 11.4264 142.178 11.9632 142.178C12.8834 142.178 13.5736 142.485 14.1104 143.098C14.6473 143.712 14.8773 144.479 14.8773 145.399V149.387C14.8773 149.463 14.8773 149.54 14.8006 149.617C14.7239 149.693 14.6473 149.693 14.5706 149.693H14.3405C14.2638 149.693 14.1871 149.693 14.1104 149.617C14.0338 149.54 14.0338 149.463 14.0338 149.387V145.475C14.0338 144.709 13.8804 144.095 13.4969 143.712C13.1135 143.252 12.5767 143.098 11.8865 143.098C11.1963 143.098 10.6595 143.328 10.2761 143.712C9.89265 144.095 9.66259 144.709 9.66259 145.475V149.387C9.66259 149.463 9.66259 149.54 9.5859 149.617C9.50921 149.693 9.43253 149.693 9.35584 149.693H9.12578C8.97241 149.693 8.89572 149.693 8.81903 149.617Z"
                  fill="white"
                />
                <path
                  d="M17.9448 149.003C17.408 148.39 17.1012 147.623 17.1012 146.702V145.475C17.1012 144.555 17.408 143.712 17.9448 143.175C18.4816 142.561 19.2485 142.255 20.2454 142.255C21.2423 142.255 22.0092 142.561 22.546 143.175C23.0828 143.788 23.3896 144.555 23.3896 145.475C23.3896 145.552 23.3896 145.782 23.3896 146.089C23.3896 146.396 23.3896 146.626 23.3896 146.702C23.3896 147.623 23.0828 148.466 22.546 149.003C22.0092 149.617 21.2423 149.923 20.2454 149.923C19.2485 149.923 18.4816 149.54 17.9448 149.003ZM21.8558 148.39C22.2393 147.929 22.4693 147.316 22.546 146.549C22.546 146.472 22.546 146.242 22.546 146.012C22.546 145.782 22.546 145.552 22.546 145.475C22.546 144.709 22.316 144.095 21.8558 143.635C21.4724 143.175 20.9356 143.021 20.2454 143.021C19.5552 143.021 19.0184 143.252 18.635 143.635C18.2515 144.018 18.0215 144.709 17.9448 145.475V146.549C17.9448 147.316 18.1749 147.929 18.635 148.39C19.0184 148.85 19.5552 149.003 20.2454 149.003C20.9356 149.003 21.4724 148.85 21.8558 148.39Z"
                  fill="white"
                />
                <path
                  d="M30.2147 149.003C29.6779 148.39 29.3712 147.623 29.3712 146.702V145.475C29.3712 144.555 29.6779 143.712 30.2147 143.175C30.7515 142.561 31.5184 142.255 32.5154 142.255C33.5123 142.255 34.2792 142.561 34.816 143.175C35.3528 143.788 35.6595 144.555 35.6595 145.475C35.6595 145.552 35.6595 145.782 35.6595 146.089C35.6595 146.396 35.6595 146.626 35.6595 146.702C35.6595 147.623 35.3528 148.466 34.816 149.003C34.2792 149.617 33.5123 149.923 32.5154 149.923C31.5184 149.923 30.7515 149.54 30.2147 149.003ZM34.1258 148.39C34.5092 147.929 34.7393 147.316 34.816 146.549C34.816 146.472 34.816 146.242 34.816 146.012C34.816 145.782 34.816 145.552 34.816 145.475C34.816 144.709 34.5859 144.095 34.1258 143.635C33.7423 143.175 33.2055 143.021 32.5154 143.021C31.8252 143.021 31.2884 143.252 30.9049 143.635C30.5215 144.018 30.2914 144.709 30.2147 145.475V146.549C30.2147 147.316 30.4448 147.929 30.9049 148.39C31.2884 148.85 31.8252 149.003 32.5154 149.003C33.2055 149.003 33.6657 148.85 34.1258 148.39Z"
                  fill="white"
                />
                <path
                  d="M38.0368 149.617C37.9601 149.54 37.9601 149.463 37.9601 149.387V142.638C37.9601 142.561 37.9601 142.485 38.0368 142.408C38.1135 142.331 38.1902 142.331 38.2669 142.331H38.4969C38.5736 142.331 38.6503 142.331 38.727 142.408C38.8037 142.485 38.8037 142.561 38.8037 142.638V143.328C39.1104 142.945 39.4172 142.715 39.8006 142.485C40.1841 142.331 40.6442 142.178 41.181 142.178C42.1012 142.178 42.7914 142.485 43.3282 143.098C43.865 143.712 44.0951 144.479 44.0951 145.399V149.387C44.0951 149.463 44.0951 149.54 44.0184 149.617C43.9417 149.693 43.865 149.693 43.7884 149.693H43.5583C43.4816 149.693 43.4049 149.693 43.3282 149.617C43.2515 149.54 43.2515 149.463 43.2515 149.387V145.475C43.2515 144.709 43.0982 144.095 42.7147 143.712C42.3313 143.252 41.7945 143.098 41.1043 143.098C40.4141 143.098 39.8773 143.328 39.4939 143.712C39.1104 144.095 38.8804 144.709 38.8804 145.475V149.387C38.8804 149.463 38.8804 149.54 38.8037 149.617C38.727 149.693 38.6503 149.693 38.5736 149.693H38.3436C38.1135 149.693 38.0368 149.693 38.0368 149.617Z"
                  fill="white"
                />
                <path
                  d="M47.1626 149.003C46.6258 148.39 46.319 147.623 46.2423 146.626V145.552C46.319 144.555 46.6258 143.788 47.1626 143.175C47.6994 142.561 48.4663 142.255 49.3098 142.255C50.3068 142.255 51.0736 142.561 51.6104 143.252C52.1473 143.865 52.454 144.785 52.454 145.936V146.166C52.454 146.242 52.454 146.319 52.3773 146.396C52.3006 146.472 52.2239 146.472 52.1473 146.472H47.0859V146.626C47.0859 147.086 47.2393 147.469 47.3927 147.853C47.546 148.236 47.8528 148.543 48.1595 148.773C48.4663 149.003 48.8497 149.156 49.3098 149.156C49.8466 149.156 50.2301 149.08 50.5368 148.85C50.8436 148.62 51.0736 148.466 51.227 148.236C51.3037 148.16 51.3804 148.083 51.3804 148.006C51.4571 148.006 51.5338 147.929 51.6104 147.929H51.8405C51.9172 147.929 51.9939 147.929 52.0706 148.006C52.1472 148.083 52.1473 148.083 52.1473 148.16C52.1473 148.39 51.9939 148.62 51.7638 148.85C51.5338 149.156 51.1503 149.387 50.6902 149.54C50.2301 149.77 49.7699 149.847 49.1565 149.847C48.4663 149.847 47.6994 149.54 47.1626 149.003ZM51.6104 145.629C51.6104 144.862 51.3804 144.248 50.9969 143.788C50.6135 143.328 50 143.098 49.3865 143.098C48.6963 143.098 48.1595 143.328 47.7761 143.788C47.3927 144.248 47.1626 144.862 47.1626 145.552V145.629H51.6104Z"
                  fill="white"
                />
                <path
                  d="M58.7423 149.617C58.6657 149.54 58.6657 149.463 58.6657 149.387V142.638C58.6657 142.561 58.6657 142.485 58.7423 142.408C58.819 142.331 58.8957 142.331 58.9724 142.331H59.2025C59.2792 142.331 59.3558 142.331 59.4325 142.408C59.5092 142.485 59.5092 142.561 59.5092 142.638V143.328C59.816 142.945 60.1227 142.715 60.5061 142.485C60.8896 142.331 61.3497 142.178 61.8865 142.178C62.8068 142.178 63.4969 142.485 64.0338 143.098C64.5706 143.712 64.8006 144.479 64.8006 145.399V149.387C64.8006 149.463 64.8006 149.54 64.7239 149.617C64.6473 149.693 64.5706 149.693 64.4939 149.693H64.2638C64.1871 149.693 64.1104 149.693 64.0338 149.617C63.9571 149.54 63.9571 149.463 63.9571 149.387V145.475C63.9571 144.709 63.8037 144.095 63.4203 143.712C63.0368 143.252 62.5 143.098 61.8098 143.098C61.1197 143.098 60.5828 143.328 60.1994 143.712C59.816 144.095 59.5859 144.709 59.5859 145.475V149.387C59.5859 149.463 59.5859 149.54 59.5092 149.617C59.4325 149.693 59.3558 149.693 59.2792 149.693H59.0491C58.8957 149.693 58.819 149.693 58.7423 149.617Z"
                  fill="white"
                />
                <path
                  d="M67.9448 149.003C67.408 148.39 67.1012 147.623 67.0245 146.626V145.552C67.1012 144.555 67.408 143.788 67.9448 143.175C68.4816 142.561 69.2485 142.255 70.092 142.255C71.089 142.255 71.8558 142.561 72.3927 143.252C72.9295 143.865 73.2362 144.785 73.2362 145.936V146.166C73.2362 146.242 73.2362 146.319 73.1595 146.396C73.0828 146.472 73.0062 146.472 72.9295 146.472H67.8681V146.626C67.8681 147.086 68.0215 147.469 68.1749 147.853C68.3282 148.236 68.635 148.543 68.9417 148.773C69.2485 149.003 69.6319 149.156 70.092 149.156C70.6288 149.156 71.0123 149.08 71.319 148.85C71.6258 148.62 71.8558 148.466 72.0092 148.236C72.0859 148.16 72.1626 148.083 72.1626 148.006C72.2393 148.006 72.316 147.929 72.3927 147.929H72.6227C72.6994 147.929 72.7761 147.929 72.8528 148.006C72.9295 148.083 72.9295 148.083 72.9295 148.16C72.9295 148.39 72.7761 148.62 72.546 148.85C72.316 149.156 71.9325 149.387 71.4724 149.54C71.0123 149.77 70.5522 149.847 69.9387 149.847C69.2485 149.847 68.4816 149.54 67.9448 149.003ZM72.3927 145.629C72.3927 144.862 72.1626 144.248 71.7792 143.788C71.3957 143.328 70.7822 143.098 70.1687 143.098C69.4785 143.098 68.9417 143.328 68.5583 143.788C68.1749 144.248 67.9448 144.862 67.9448 145.552V145.629H72.3927Z"
                  fill="white"
                />
                <path
                  d="M75.997 149.003C75.4601 148.39 75.1534 147.623 75.0767 146.626V145.552C75.1534 144.555 75.4601 143.788 75.997 143.175C76.5338 142.561 77.3006 142.255 78.1442 142.255C79.1411 142.255 79.908 142.561 80.4448 143.252C80.9816 143.865 81.2884 144.785 81.2884 145.936V146.166C81.2884 146.242 81.2884 146.319 81.2117 146.396C81.135 146.472 81.0583 146.472 80.9816 146.472H75.9203V146.626C75.9203 147.086 76.0736 147.469 76.227 147.853C76.3804 148.236 76.6871 148.543 76.9939 148.773C77.3006 149.003 77.6841 149.156 78.1442 149.156C78.681 149.156 79.0644 149.08 79.3712 148.85C79.6779 148.62 79.908 148.466 80.0614 148.236C80.138 148.16 80.2147 148.083 80.2147 148.006C80.2914 148.006 80.3681 147.929 80.4448 147.929H80.6749C80.7515 147.929 80.8282 147.929 80.9049 148.006C80.9816 148.083 80.9816 148.083 80.9816 148.16C80.9816 148.39 80.8282 148.62 80.5982 148.85C80.3681 149.156 79.9847 149.387 79.5246 149.54C79.0644 149.77 78.6043 149.847 77.9908 149.847C77.3006 149.847 76.5338 149.54 75.997 149.003ZM80.4448 145.629C80.4448 144.862 80.2147 144.248 79.8313 143.788C79.4479 143.328 78.8344 143.098 78.2209 143.098C77.5307 143.098 76.9939 143.328 76.6104 143.788C76.227 144.248 75.997 144.862 75.997 145.552V145.629H80.4448Z"
                  fill="white"
                />
                <path
                  d="M83.8957 148.85C83.4356 148.16 83.1289 147.393 83.1289 146.396V145.629C83.1289 144.709 83.4356 143.865 83.8957 143.175C84.3558 142.485 85.1227 142.178 86.1197 142.178C87.1166 142.178 87.9601 142.561 88.4969 143.328V139.954C88.4969 139.877 88.4969 139.801 88.5736 139.724C88.6503 139.647 88.727 139.647 88.8037 139.647H89.0338C89.1104 139.647 89.1871 139.647 89.2638 139.724C89.3405 139.801 89.3405 139.877 89.3405 139.954V149.387C89.3405 149.463 89.3405 149.54 89.2638 149.617C89.1871 149.693 89.1104 149.693 89.0338 149.693H88.8037C88.727 149.693 88.6503 149.693 88.5736 149.617C88.4969 149.54 88.4969 149.463 88.4969 149.387V148.696C87.9601 149.463 87.1933 149.847 86.1197 149.847C85.1994 149.847 84.4325 149.54 83.8957 148.85ZM87.9601 148.313C88.3436 147.853 88.5736 147.239 88.5736 146.549C88.5736 146.472 88.5736 146.242 88.5736 146.012C88.5736 145.782 88.5736 145.552 88.5736 145.475C88.5736 145.092 88.4969 144.709 88.3436 144.325C88.1902 143.942 87.8834 143.635 87.5767 143.405C87.27 143.175 86.8098 143.021 86.3497 143.021C85.5828 143.021 85.046 143.252 84.6626 143.712C84.2792 144.172 84.1258 144.785 84.1258 145.552V145.936C84.1258 146.779 84.2792 147.546 84.6626 148.083C85.046 148.62 85.5828 148.926 86.4264 148.926C87.0399 149.08 87.5767 148.773 87.9601 148.313Z"
                  fill="white"
                />
                <path
                  d="M92.8681 149.54C92.4847 149.31 92.1012 149.08 91.9479 148.85C91.7178 148.62 91.6411 148.39 91.6411 148.236C91.6411 148.16 91.6411 148.083 91.7178 148.006C91.7945 147.929 91.8712 147.929 91.9479 147.929H92.1779C92.2546 147.929 92.3313 147.929 92.3313 147.929C92.408 147.929 92.408 148.006 92.4847 148.083C92.7147 148.39 92.9448 148.62 93.2516 148.773C93.5583 148.926 93.9417 149.003 94.4785 149.003C95.092 149.003 95.5522 148.926 95.8589 148.696C96.2424 148.466 96.3957 148.16 96.3957 147.776C96.3957 147.546 96.319 147.316 96.1657 147.163C96.0123 147.009 95.7822 146.856 95.4755 146.779C95.1687 146.626 94.6319 146.549 94.0184 146.396C93.1749 146.242 92.638 145.936 92.3313 145.629C92.0245 145.322 91.8712 144.862 91.8712 144.402C91.8712 144.018 91.9479 143.712 92.1779 143.405C92.408 143.098 92.638 142.868 93.0215 142.638C93.4049 142.408 93.8651 142.331 94.4019 142.331C94.9387 142.331 95.4755 142.408 95.8589 142.638C96.2424 142.868 96.5491 143.021 96.7025 143.328C96.9325 143.558 97.0092 143.788 97.0092 143.942C97.0092 144.018 97.0092 144.095 96.9325 144.172C96.8558 144.248 96.7792 144.248 96.7025 144.248H96.4724C96.319 144.248 96.2423 144.172 96.1657 144.095C96.0123 143.788 95.7822 143.635 95.5522 143.482C95.3221 143.328 94.9387 143.252 94.4019 143.252C93.8651 143.252 93.4049 143.328 93.1749 143.558C92.8681 143.788 92.7147 144.095 92.7147 144.479C92.7147 144.709 92.7914 144.862 92.8681 145.015C92.9448 145.169 93.1749 145.322 93.4816 145.399C93.7884 145.552 94.2485 145.629 94.862 145.782C95.7055 146.012 96.319 146.242 96.7025 146.549C97.0859 146.856 97.2393 147.316 97.2393 147.853C97.2393 148.236 97.1626 148.62 96.9325 148.926C96.7025 149.233 96.3957 149.463 95.9356 149.693C95.4755 149.847 95.0154 150 94.4019 150C93.7884 149.847 93.2516 149.77 92.8681 149.54Z"
                  fill="white"
                />
                <path
                  d="M104.064 149.08C103.758 148.696 103.604 148.083 103.604 147.316V143.175H102.531C102.454 143.175 102.377 143.175 102.301 143.098C102.224 143.021 102.224 142.945 102.224 142.868V142.638C102.224 142.561 102.224 142.485 102.301 142.408C102.377 142.331 102.454 142.331 102.531 142.331H103.604V139.954C103.604 139.877 103.604 139.801 103.681 139.724C103.758 139.647 103.834 139.647 103.911 139.647H104.141C104.218 139.647 104.294 139.647 104.371 139.724C104.448 139.801 104.448 139.877 104.448 139.954V142.331H106.212C106.288 142.331 106.365 142.331 106.442 142.408C106.518 142.485 106.518 142.561 106.518 142.638V142.868C106.518 142.945 106.518 143.021 106.442 143.098C106.365 143.175 106.288 143.175 106.212 143.175H104.448V147.316C104.448 147.853 104.525 148.236 104.678 148.543C104.831 148.85 105.138 148.926 105.521 148.926H106.288C106.365 148.926 106.442 148.926 106.518 149.003C106.595 149.08 106.595 149.156 106.595 149.233V149.463C106.595 149.54 106.595 149.617 106.518 149.693C106.442 149.77 106.365 149.77 106.288 149.77H105.445C104.831 149.693 104.371 149.54 104.064 149.08Z"
                  fill="white"
                />
                <path
                  d="M109.049 149.003C108.512 148.39 108.206 147.623 108.206 146.702V145.475C108.206 144.555 108.512 143.712 109.049 143.175C109.586 142.561 110.353 142.255 111.35 142.255C112.347 142.255 113.114 142.561 113.65 143.175C114.187 143.788 114.494 144.555 114.494 145.475C114.494 145.552 114.494 145.782 114.494 146.089C114.494 146.396 114.494 146.626 114.494 146.702C114.494 147.623 114.187 148.466 113.65 149.003C113.114 149.617 112.347 149.923 111.35 149.923C110.353 149.923 109.586 149.54 109.049 149.003ZM112.96 148.39C113.344 147.929 113.574 147.316 113.65 146.549C113.65 146.472 113.65 146.242 113.65 146.012C113.65 145.782 113.65 145.552 113.65 145.475C113.65 144.709 113.42 144.095 112.96 143.635C112.577 143.175 112.04 143.021 111.35 143.021C110.66 143.021 110.123 143.252 109.739 143.635C109.356 144.018 109.126 144.709 109.049 145.475V146.549C109.049 147.316 109.279 147.929 109.739 148.39C110.123 148.85 110.66 149.003 111.35 149.003C112.04 149.003 112.5 148.85 112.96 148.39Z"
                  fill="white"
                />
                <path
                  d="M120.859 149.617C120.782 149.54 120.782 149.463 120.782 149.387V139.954C120.782 139.877 120.782 139.801 120.859 139.724C120.936 139.647 121.012 139.647 121.089 139.647H121.319C121.396 139.647 121.472 139.647 121.549 139.724C121.626 139.801 121.626 139.877 121.626 139.954V144.939L124.77 142.561C124.923 142.485 125 142.408 125.077 142.331C125.153 142.331 125.23 142.331 125.383 142.331H125.69C125.767 142.331 125.844 142.331 125.92 142.408C125.997 142.485 125.997 142.561 125.997 142.638C125.997 142.715 125.92 142.868 125.844 142.945L122.239 145.629L126.15 149.156C126.304 149.233 126.304 149.387 126.304 149.463C126.304 149.54 126.304 149.617 126.227 149.693C126.15 149.77 126.074 149.77 125.997 149.77H125.767C125.614 149.77 125.537 149.77 125.46 149.77C125.383 149.77 125.307 149.693 125.153 149.54L121.626 146.396V149.463C121.626 149.54 121.626 149.617 121.549 149.693C121.472 149.77 121.396 149.77 121.319 149.77H121.089C121.012 149.693 120.936 149.693 120.859 149.617Z"
                  fill="white"
                />
                <path
                  d="M128.067 149.617C127.991 149.54 127.991 149.463 127.991 149.387V142.638C127.991 142.561 127.991 142.485 128.067 142.408C128.144 142.331 128.221 142.331 128.298 142.331H128.528C128.604 142.331 128.681 142.331 128.758 142.408C128.834 142.485 128.834 142.561 128.834 142.638V143.328C129.141 142.945 129.448 142.715 129.831 142.485C130.215 142.331 130.675 142.178 131.212 142.178C132.132 142.178 132.822 142.485 133.359 143.098C133.896 143.712 134.126 144.479 134.126 145.399V149.387C134.126 149.463 134.126 149.54 134.049 149.617C133.972 149.693 133.896 149.693 133.819 149.693H133.589C133.512 149.693 133.436 149.693 133.359 149.617C133.282 149.54 133.282 149.463 133.282 149.387V145.475C133.282 144.709 133.129 144.095 132.745 143.712C132.362 143.252 131.825 143.098 131.135 143.098C130.445 143.098 129.908 143.328 129.525 143.712C129.141 144.095 128.834 144.709 128.834 145.475V149.387C128.834 149.463 128.834 149.54 128.758 149.617C128.681 149.693 128.604 149.693 128.528 149.693H128.298C128.221 149.693 128.144 149.693 128.067 149.617Z"
                  fill="white"
                />
                <path
                  d="M137.193 149.003C136.656 148.39 136.35 147.623 136.35 146.702V145.475C136.35 144.555 136.656 143.712 137.193 143.175C137.73 142.561 138.497 142.255 139.494 142.255C140.491 142.255 141.258 142.561 141.794 143.175C142.331 143.788 142.638 144.555 142.638 145.475C142.638 145.552 142.638 145.782 142.638 146.089C142.638 146.396 142.638 146.626 142.638 146.702C142.638 147.623 142.331 148.466 141.794 149.003C141.258 149.617 140.491 149.923 139.494 149.923C138.497 149.923 137.73 149.54 137.193 149.003ZM141.104 148.39C141.488 147.929 141.718 147.316 141.794 146.549C141.794 146.472 141.794 146.242 141.794 146.012C141.794 145.782 141.794 145.552 141.794 145.475C141.794 144.709 141.564 144.095 141.104 143.635C140.721 143.175 140.184 143.021 139.494 143.021C138.804 143.021 138.267 143.252 137.883 143.635C137.5 144.018 137.27 144.709 137.193 145.475V146.549C137.193 147.316 137.423 147.929 137.883 148.39C138.267 148.85 138.804 149.003 139.494 149.003C140.184 149.003 140.721 148.85 141.104 148.39Z"
                  fill="white"
                />
                <path
                  d="M146.396 149.617C146.319 149.54 146.242 149.463 146.242 149.31L144.248 142.715V142.561C144.248 142.485 144.248 142.408 144.325 142.331C144.402 142.255 144.479 142.255 144.555 142.255H144.862C144.939 142.255 145.015 142.255 145.092 142.331C145.169 142.408 145.169 142.408 145.169 142.485L146.933 148.39L148.773 142.561C148.773 142.485 148.85 142.408 148.926 142.331C149.003 142.255 149.08 142.255 149.156 142.255H149.463C149.54 142.255 149.617 142.255 149.693 142.331C149.77 142.408 149.77 142.485 149.847 142.561L151.687 148.39L153.451 142.485C153.451 142.408 153.528 142.408 153.528 142.331C153.604 142.255 153.681 142.255 153.758 142.255H153.988C154.064 142.255 154.141 142.255 154.218 142.331C154.295 142.408 154.295 142.485 154.295 142.561V142.715L152.301 149.31C152.224 149.463 152.224 149.54 152.147 149.617C152.071 149.693 151.994 149.693 151.841 149.693H151.61C151.38 149.693 151.227 149.54 151.15 149.31L149.387 143.712L147.623 149.31C147.546 149.54 147.393 149.693 147.163 149.693H146.933C146.549 149.693 146.396 149.693 146.396 149.617Z"
                  fill="white"
                />
                <path d="M7.59204 146.396V145.706H53.5276V146.396H7.59204Z" fill="white" />
                <path
                  d="M57.6687 82.6687C57.0552 82.6687 56.365 82.5153 55.7515 82.2853C53.9111 81.5184 52.6841 79.6779 52.6841 77.6841L52.6074 67.638L52.6841 46.0123C52.6841 39.7239 55.5215 33.819 60.4295 29.908C61.5798 28.9877 63.2669 29.1411 64.1871 30.2914C65.1074 31.4417 64.954 33.1288 63.8037 34.0491C60.1227 36.9632 58.0522 41.3344 58.0522 46.0123L57.9755 67.638V76.8405L71.3957 63.4203C71.9325 62.8834 72.546 62.6534 73.3129 62.6534H88.6503C97.0859 62.6534 103.988 55.7515 103.988 47.316V46.0123C103.988 37.5767 97.0859 30.6749 88.6503 30.6749H80.9816C71.2424 30.6749 63.3436 23.773 63.3436 15.3374C63.3436 6.90184 71.2424 0 80.9816 0C90.7209 0 98.6197 6.90184 98.6197 15.3374V16.3344C98.6197 17.7914 97.3927 19.0184 95.9356 19.0184C94.4786 19.0184 93.2516 17.7914 93.2516 16.3344V15.3374C93.2516 9.81596 87.7301 5.3681 80.9049 5.3681C74.0798 5.3681 68.5583 9.81596 68.5583 15.3374C68.5583 20.8589 74.0798 25.3068 80.9049 25.3068H88.5736C99.9233 25.3068 109.202 34.5859 109.202 45.9356V47.2393C109.202 58.589 99.9233 67.8681 88.5736 67.8681H74.3865L61.1963 81.0583C60.1994 82.1319 58.9724 82.6687 57.6687 82.6687Z"
                  fill="#FF7F57"
                />
                <path
                  d="M70.9356 50.3068C72.7568 50.3068 74.2332 48.8304 74.2332 47.0092C74.2332 45.188 72.7568 43.7117 70.9356 43.7117C69.1144 43.7117 67.638 45.188 67.638 47.0092C67.638 48.8304 69.1144 50.3068 70.9356 50.3068Z"
                  fill="#FF7F57"
                />
                <path
                  d="M80.9049 50.3068C82.7261 50.3068 84.2025 48.8304 84.2025 47.0092C84.2025 45.188 82.7261 43.7117 80.9049 43.7117C79.0837 43.7117 77.6074 45.188 77.6074 47.0092C77.6074 48.8304 79.0837 50.3068 80.9049 50.3068Z"
                  fill="#FF7F57"
                />
                <path
                  d="M90.8743 50.3068C92.6955 50.3068 94.1718 48.8304 94.1718 47.0092C94.1718 45.188 92.6955 43.7117 90.8743 43.7117C89.0531 43.7117 87.5767 45.188 87.5767 47.0092C87.5767 48.8304 89.0531 50.3068 90.8743 50.3068Z"
                  fill="#FF7F57"
                />
              </svg>
            </div>
            <h2>Glad to see you again little confessor</h2>
          </div>
          <form onSubmit={this.handleFormSubmit} className="group-form">
            <input
              type="email"
              name="email"
              value={email}
              onChange={e => this.updateEmail(e.target.value)}
              className={emailValid ? 'group-form__input' : 'group-form__input error-input'}
              placeholder="username@email.com"
            />
            {!emailValid && (
              <div className="error-message">
                <p>{errorMessage.email}</p>
              </div>
            )}
            <input
              type={hidden ? 'password' : 'text'}
              name="password"
              value={password}
              onChange={e => this.updatePassword(e.target.value)}
              className={passwordValid ? 'group-form__input' : 'group-form__input error-input'}
              placeholder="••••••••••"
            />
            <span onClick={this.handlePassword} className="group-form__toggle-password">
              {hidden ? (
                <svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M2.54206 10.8411L3.58879 9.79439C2.99065 9.27103 2.39252 8.74766 1.86916 8.07477C3.58879 5.98131 5.45794 4.71028 7.40187 4.41121C5.83178 4.85981 4.63551 6.28037 4.63551 8C4.63551 8.2243 4.63551 8.4486 4.71028 8.6729L6.35514 7.02804C6.57944 6.57944 6.95327 6.20561 7.40187 5.98131L10.3178 3.06542C9.71963 2.91589 9.04673 2.84112 8.4486 2.84112C5.53271 2.84112 2.69159 4.48598 0.373832 7.5514L0 8L0.373832 8.4486C1.04673 9.42056 1.79439 10.1682 2.54206 10.8411Z"
                    fill="white"
                    fillOpacity="0.3"
                  />
                  <path
                    d="M13.2336 4.33645L16.5234 1.04673L15.4019 0L0.448598 14.9533L1.49533 16L5.08411 12.4112C6.20561 12.9346 7.3271 13.1589 8.4486 13.1589C11.3645 13.1589 14.2056 11.514 16.5234 8.4486L16.8972 8L16.5234 7.5514C15.5514 6.20561 14.3551 5.15888 13.2336 4.33645ZM10.6168 8C10.6168 9.27103 9.64486 10.243 8.37383 10.243C8.07477 10.243 7.7757 10.1682 7.47664 10.0935L10.3925 7.17757C10.5421 7.40187 10.6168 7.70093 10.6168 8ZM6.35514 11.1402C6.65421 11.3645 7.02804 11.514 7.40187 11.5888C7.02804 11.514 6.57944 11.4393 6.20561 11.2897L6.35514 11.1402ZM9.04673 11.6636C10.7664 11.3645 12.1122 9.79439 12.1122 8C12.1122 7.25234 11.8879 6.57944 11.514 6.05608L12.1122 5.45794C13.0841 6.05607 14.0561 6.95327 15.028 8.07477C13.1589 10.243 11.1402 11.4393 9.04673 11.6636Z"
                    fill="white"
                    fillOpacity="0.3"
                  />
                </svg>
              ) : (
                <svg width="17" height="16" viewBox="0 0 17 11" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M8.48756 0C5.55822 0 2.704 1.62294 0.375556 4.72127L0 5.16389L0.375556 5.60651C2.704 8.70484 5.55822 10.3278 8.48756 10.3278C11.4169 10.3278 14.2711 8.70484 16.5996 5.60651L16.9 5.16389L16.5244 4.72127C14.196 1.62294 11.4169 0 8.48756 0ZM6.23422 5.16389C6.23422 3.9098 7.21067 2.95079 8.48756 2.95079C9.76444 2.95079 10.7409 3.9098 10.7409 5.16389C10.7409 6.41798 9.76444 7.37698 8.48756 7.37698C7.21067 7.37698 6.23422 6.41798 6.23422 5.16389ZM1.87778 5.16389C3.83067 2.80325 6.084 1.4754 8.41244 1.4754C6.38444 1.4754 4.732 3.1721 4.732 5.16389C4.732 7.00814 6.15911 8.5573 7.96178 8.77861C5.78356 8.63107 3.75556 7.37698 1.87778 5.16389ZM9.01333 8.77861C10.816 8.48353 12.2431 7.00814 12.2431 5.16389C12.2431 3.1721 10.5907 1.54917 8.56267 1.4754C10.8911 1.4754 13.0693 2.72948 15.0973 5.16389C13.2196 7.37698 11.1164 8.63107 9.01333 8.77861Z"
                    fill="#7E8186"
                  />
                </svg>
              )}
            </span>
            {!passwordValid && (
              <div className="error-message">
                <p>{errorMessage.password}</p>
              </div>
            )}
            <div className="group-form__helpers">
              {/* <label className="group-form__checkbox">
                Remember me
                <input type="checkbox" name="rememberMe" id="rememberMe" />
                <span className="group-form__checkbox__check"></span>
              </label>
              <span className="group-form__helper-password">I forgot my password</span> */}
            </div>
            <button type="submit" value="Login" disabled={!formValid} className="btn btn-primary">
              Login
            </button>
            <div className="group-form__footer">
              <p>
                Don’t have an account? &nbsp;
                <Link to="/signup" className="red-link">
                  Sign Up
                </Link>
              </p>
            </div>
          </form>
        </div>
      </div>
    );
  }
}

export default withAuth(withFlash(Login));
